{% trans_default_domain 'module_newdaybar' %}

<script>
    var realSecsToTomorrow = '{{ realSecsToTomorrow }}'
    var secsPerDay = '{{ secsPerDay }}'

    const bar = setInterval(newdaybar, 1000)

    function newdaybar ()
    {
        if (realSecsToTomorrow > 0)
        {
            realSecsToTomorrow--

            let percent = ( realSecsToTomorrow / secsPerDay ) * 100
            percent = Math.max(0, Math.min(100, percent))

            document.getElementById('module-newdaybar-progress').style.width = `${percent}%`
            document.getElementById('module-newdaybar-timer').innerText = Lotgd.duration(realSecsToTomorrow)
        }
        else
        {
            clearInterval(bar)

            document.getElementById('module-newdaybar-timer').innerHTML = '<i class=\"fa fa-sun\"></i> {{ "charstats.newday"|trans|uncolorize }}'
        }
    }
</script>
